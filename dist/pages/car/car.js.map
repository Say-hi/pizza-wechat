{"version":3,"sources":["pages/car/car.js"],"names":["app","getApp","Page","data","allMoney","src","chooseMenuNum","e","currentTarget","dataset","type","menuArr","index","num","setData","calculatorMoney","confirm","wx","navigateTo","url","del","splice","setting","editor","su","gs","v","checked","price","chooseAll","must","all","choose","entries","i","length","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"car.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    allMoney: 0,\n    src: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg'\n  },\n  // 菜单页数量选择\n  chooseMenuNum (e) {\n    if (e.currentTarget.dataset.type === 'del') {\n      --this.data.menuArr[e.currentTarget.dataset.index].num\n    } else {\n      if (!this.data.menuArr[e.currentTarget.dataset.index].num) {\n        this.data.menuArr[e.currentTarget.dataset.index].num = 1\n      } else {\n        ++this.data.menuArr[e.currentTarget.dataset.index].num\n      }\n    }\n    this.setData({\n      menuArr: this.data.menuArr\n    })\n    this.calculatorMoney()\n  },\n  // 确认订单\n  confirm () {\n    wx.navigateTo({\n      url: `../submitOrder/submitOrder?money=${this.data.allMoney}`\n    })\n  },\n  // 删除当前物品\n  del (e) {\n    this.data.menuArr.splice(e.currentTarget.dataset.index, 1)\n    this.setData({\n      menuArr: this.data.menuArr\n    })\n    this.calculatorMoney()\n  },\n  // 编辑\n  setting () {\n    this.setData({\n      editor: !this.data.editor\n    })\n  },\n  // 计算总价格\n  calculatorMoney () {\n    let allMoney = 0\n    app.su('goodsStorage', this.data.menuArr)\n    for (let v of app.gs('goodsStorage')) {\n      if (v.num && v.checked) {\n        allMoney += v.num * v.price\n      }\n    }\n    this.setData({\n      allMoney\n    })\n  },\n  // 选择所有\n  chooseAll (must) {\n    if (must === 'must') {\n      // console.log(1)\n      for (let v of this.data.menuArr) {\n        v['checked'] = true\n      }\n      this.setData({\n        all: true,\n        menuArr: this.data.menuArr\n      })\n    } else {\n      // console.log(2)\n      for (let v of this.data.menuArr) {\n        v['checked'] = !this.data.all\n      }\n      this.setData({\n        all: !this.data.all,\n        menuArr: this.data.menuArr\n      })\n    }\n    this.calculatorMoney()\n  },\n  // 多项选择\n  choose (e) {\n    this.data.menuArr[e.currentTarget.dataset.index].checked = !this.data.menuArr[e.currentTarget.dataset.index].checked\n    for (let [i, v] of this.data.menuArr.entries()) {\n      if (!v.checked) {\n        this.setData({\n          all: false,\n          menuArr: this.data.menuArr\n        })\n        this.calculatorMoney()\n        return\n      }\n      if (i === this.data.menuArr.length - 1) {\n        this.setData({\n          all: true,\n          menuArr: this.data.menuArr\n        })\n      }\n    }\n    this.calculatorMoney()\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    if (app.gs('goodsStorage')) {\n      this.setData({\n        menuArr: app.gs('goodsStorage')\n      })\n      this.chooseAll('must')\n    } else {\n      this.setData({\n        menuArr: []\n      })\n    }\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}