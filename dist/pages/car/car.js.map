{"version":3,"sources":["pages/car/car.js"],"names":["app","getApp","Page","data","allMoney","chooseMenuNum","e","currentTarget","dataset","type","menuArr","index","num","setData","calculatorMoney","confirm","wx","navigateTo","url","del","splice","setting","editor","su","gs","v","checked","price","chooseAll","must","all","choose","entries","i","length","onLoad","onReady","onShow","console","log","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"car.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    allMoney: 0\n  },\n  // 菜单页数量选择\n  chooseMenuNum (e) {\n    if (e.currentTarget.dataset.type === 'del') {\n      --this.data.menuArr[e.currentTarget.dataset.index].num\n    } else {\n      if (!this.data.menuArr[e.currentTarget.dataset.index].num) {\n        this.data.menuArr[e.currentTarget.dataset.index].num = 1\n      } else {\n        ++this.data.menuArr[e.currentTarget.dataset.index].num\n      }\n    }\n    this.setData({\n      menuArr: this.data.menuArr\n    })\n    this.calculatorMoney()\n  },\n  // 确认订单\n  confirm () {\n    wx.navigateTo({\n      url: `../submitOrder/submitOrder?money=${this.data.allMoney}`\n    })\n  },\n  // 删除当前物品\n  del (e) {\n    this.data.menuArr.splice(e.currentTarget.dataset.index, 1)\n    this.setData({\n      menuArr: this.data.menuArr\n    })\n    this.calculatorMoney()\n  },\n  // 编辑\n  setting () {\n    this.setData({\n      editor: !this.data.editor\n    })\n  },\n  // 计算总价格\n  calculatorMoney () {\n    let allMoney = 0\n    app.su('goodsStorage', this.data.menuArr)\n    for (let v of app.gs('goodsStorage')) {\n      if (v.num && v.checked) {\n        allMoney += v.num * v.price\n      }\n    }\n    this.setData({\n      allMoney\n    })\n  },\n  // 选择所有\n  chooseAll (must) {\n    if (must === 'must') {\n      // console.log(1)\n      for (let v of this.data.menuArr) {\n        v['checked'] = true\n      }\n      this.setData({\n        all: true,\n        menuArr: this.data.menuArr\n      })\n    } else {\n      // console.log(2)\n      for (let v of this.data.menuArr) {\n        v['checked'] = !this.data.all\n      }\n      this.setData({\n        all: !this.data.all,\n        menuArr: this.data.menuArr\n      })\n    }\n    this.calculatorMoney()\n  },\n  // 多项选择\n  choose (e) {\n    this.data.menuArr[e.currentTarget.dataset.index].checked = !this.data.menuArr[e.currentTarget.dataset.index].checked\n    for (let [i, v] of this.data.menuArr.entries()) {\n      if (!v.checked) {\n        this.setData({\n          all: false,\n          menuArr: this.data.menuArr\n        })\n        this.calculatorMoney()\n        return\n      }\n      if (i === this.data.menuArr.length - 1) {\n        this.setData({\n          all: true,\n          menuArr: this.data.menuArr\n        })\n      }\n    }\n    this.calculatorMoney()\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    if (app.gs('goodsStorage')) {\n      console.log(2)\n      this.setData({\n        menuArr: app.gs('goodsStorage')\n      })\n      this.chooseAll('must')\n    } else {\n      console.log(1)\n      this.setData({\n        menuArr: []\n      })\n    }\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}