{"version":3,"sources":["pages/coupon/coupon.js"],"names":["app","getApp","Page","data","currentIndex","needUseCoupon","couponArr","need","del","time","title","getCouponData","that","wxrequest","url","getUrl","mycoupon","session3rd","gs","success","res","wx","hideLoading","code","m","v","start_time","Date","toLocaleString","end_time","setData","setToast","content","msg","chooseTab","e","currentTarget","dataset","index","useCoupon","su","wsy","navigateBack","delta","onLoad","options","type","orderMoney","money","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":";;AAAA;AACA,IAAMA,MAAMC,QAAZ;;AAEA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,kBAAc,CADV;AAEJC,mBAAe,KAFX;AAGJC,eAAW,CACT;AACEC,YAAM,EADR;AAEEC,WAAK,EAFP;AAGEC,YAAM,QAHR;AAIEC,aAAO;AAJT,KADS,EAOT;AACEH,YAAM,EADR;AAEEC,WAAK,EAFP;AAGEC,YAAM,QAHR;AAIEC,aAAO;AAJT,KAPS,EAaT;AACEH,YAAM,GADR;AAEEC,WAAK,GAFP;AAGEC,YAAM,QAHR;AAIEC,aAAO;AAJT,KAbS;AAHP,GAJH;AA4BHC,eA5BG,2BA4Bc;AACf,QAAIC,OAAO,IAAX;AACAZ,QAAIa,SAAJ,CAAc;AACZC,WAAKd,IAAIe,MAAJ,GAAaC,QADN;AAEZb,YAAM;AACJc,oBAAYjB,IAAIkB,EAAJ;AADR,OAFM;AAKZC,aALY,mBAKHC,GALG,EAKE;AACZC,WAAGC,WAAH;AACA,YAAIF,IAAIjB,IAAJ,CAASoB,IAAT,KAAkB,KAAtB,EAA6B;AAC3B,eAAK,IAAIC,CAAT,IAAcJ,IAAIjB,IAAJ,CAASA,IAAvB,EAA6B;AAAA;AAAA;AAAA;;AAAA;AAC3B,mCAAciB,IAAIjB,IAAJ,CAASA,IAAT,CAAcqB,CAAd,CAAd,8HAAgC;AAAA,oBAAvBC,CAAuB;;AAC9BA,kBAAEC,UAAF,GAAe,IAAIC,IAAJ,CAASF,EAAEC,UAAX,EAAuBE,cAAvB,EAAf;AACAH,kBAAEI,QAAF,GAAa,IAAIF,IAAJ,CAASF,EAAEI,QAAX,EAAqBD,cAArB,EAAb;AACD;AAJ0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAK5B;AACDhB,eAAKkB,OAAL,CAAa;AACXxB,uBAAWc,IAAIjB,IAAJ,CAASA;AADT,WAAb;AAGD,SAVD,MAUO;AACLH,cAAI+B,QAAJ,CAAanB,IAAb,EAAmB,EAACoB,SAASZ,IAAIjB,IAAJ,CAAS8B,GAAnB,EAAnB;AACD;AACF;AApBW,KAAd;AAsBD,GApDE;AAqDHC,WArDG,qBAqDQC,CArDR,EAqDW;AACZ,SAAKL,OAAL,CAAa;AACX1B,oBAAc+B,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC;AAD3B,KAAb;AAGD,GAzDE;;AA0DH;AACAC,WA3DG,qBA2DQJ,CA3DR,EA2DW;AACZnC,QAAIwC,EAAJ,CAAO,WAAP,EAAoB,KAAKrC,IAAL,CAAUG,SAAV,CAAoBmC,GAApB,CAAwBN,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC,KAAhD,CAApB;AACAjB,OAAGqB,YAAH,CAAgB;AACdC,aAAO;AADO,KAAhB;AAGD,GAhEE;;AAiEH;;;AAGAC,QApEG,kBAoEKC,OApEL,EAoEc;AACf;AACA,SAAKf,OAAL,CAAa;AACXzB,qBAAewC,QAAQC,IAAR,KAAiB,OAAjB,GAA2B,IAA3B,GAAkC,KADtC;AAEXC,kBAAYF,QAAQG,KAAR,IAAiB;AAFlB,KAAb;AAIA,SAAKrC,aAAL;AACA;AACD,GA5EE;;;AA8EH;;;AAGAsC,SAjFG,qBAiFQ;AACT;AACD,GAnFE;;;AAqFH;;;AAGAC,QAxFG,oBAwFO;AACR;AACD,GA1FE;;;AA4FH;;;AAGAC,QA/FG,oBA+FO;AACR;AACD,GAjGE;;;AAmGH;;;AAGAC,UAtGG,sBAsGS;AACV;AACD,GAxGE;;;AA0GH;;;AAGAC,mBA7GG,+BA6GkB;AACnB;AACD;AA/GE,CAAL","file":"coupon.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    currentIndex: 0,\n    needUseCoupon: false,\n    couponArr: [\n      {\n        need: 40,\n        del: 20,\n        time: '有效期30天',\n        title: '阿斯顿发撒旦法'\n      },\n      {\n        need: 50,\n        del: 30,\n        time: '有效期30天',\n        title: '阿斯顿发撒旦法'\n      },\n      {\n        need: 600,\n        del: 300,\n        time: '有效期30天',\n        title: '阿斯顿发撒旦法'\n      }\n    ]\n  },\n  getCouponData () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().mycoupon,\n      data: {\n        session3rd: app.gs()\n      },\n      success (res) {\n        wx.hideLoading()\n        if (res.data.code === '200') {\n          for (let m in res.data.data) {\n            for (let v of res.data.data[m]) {\n              v.start_time = new Date(v.start_time).toLocaleString()\n              v.end_time = new Date(v.end_time).toLocaleString()\n            }\n          }\n          that.setData({\n            couponArr: res.data.data\n          })\n        } else {\n          app.setToast(that, {content: res.data.msg})\n        }\n      }\n    })\n  },\n  chooseTab (e) {\n    this.setData({\n      currentIndex: e.currentTarget.dataset.index\n    })\n  },\n  // 使用优惠卷\n  useCoupon (e) {\n    app.su('useCoupon', this.data.couponArr.wsy[e.currentTarget.dataset.index])\n    wx.navigateBack({\n      delta: 1\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad (options) {\n    /*eslint-disable*/\n    this.setData({\n      needUseCoupon: options.type === 'order' ? true : false,\n      orderMoney: options.money || 0\n    })\n    this.getCouponData()\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}