{"version":3,"sources":["pages/menu/menu.js"],"names":["app","getApp","Page","data","currentIndex","sizeIndex","sizeNum","allMoney","getCoupon","e","that","setToast","image","bgc","color","content","chooseMenuNum","currentTarget","dataset","type","menuArr","list","index","num","setData","setGoodsStorage","confirm","wx","navigateTo","url","close","showIndex","toString","showSizeChoose","size","goodsStorage","gs","length","push","img","src","name","goodsname","price","spec","id","s_id","spec_name","entries","i","v","m","g_id","splice","su","calculatorMoney","allCount","removeStorageSync","chooseSize","chooseSizeNum","chooseTab","t_id","getMenuData","wxrequest","getUrl","menu","session3rd","success","res","code","hideLoading","menuTabArr","typename","msg","onLoad","onReady","onShow","timer","setTimeout","parseInt","outv","g","s","onHide","onUnload","onPullDownRefresh"],"mappings":"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","file":"menu.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    currentIndex: 0,\n    sizeIndex: 0,\n    sizeNum: 1,\n    allMoney: 0\n  },\n  // 领取优惠卷\n  getCoupon (e) {\n    let that = this\n    app.setToast(that, {image: '../../images/success.png', bgc: '#333', color: '#f30', content: '领取成功'})\n  },\n  // 菜单页数量选择\n  chooseMenuNum (e) {\n    if (e.currentTarget.dataset.type === 'del') {\n      --this.data.menuArr[this.data.currentIndex].list[e.currentTarget.dataset.index].num\n    } else {\n      if (!this.data.menuArr[this.data.currentIndex].list[e.currentTarget.dataset.index].num) {\n        this.data.menuArr[this.data.currentIndex].list[e.currentTarget.dataset.index].num = 1\n      } else {\n        ++this.data.menuArr[this.data.currentIndex].list[e.currentTarget.dataset.index].num\n      }\n    }\n    this.setData({\n      menuArr: this.data.menuArr\n    })\n    this.setGoodsStorage()\n  },\n  // 确定下单\n  confirm () {\n    wx.navigateTo({\n      url: `../submitOrder/submitOrder?money=${this.data.allMoney}`\n    })\n  },\n  // 尺寸选择弹窗\n  close (e) {\n    if (e.currentTarget.dataset.type === 'addCar') {\n      // todo  购物车相关计算逻辑\n      this.setGoodsStorage(true)\n    }\n    this.setData({\n      showIndex: e.currentTarget.dataset.index.toString() || this.data.showIndex,\n      showSizeChoose: !this.data.showSizeChoose,\n      sizeNum: 1\n    })\n  },\n  // 将选择的物品放置缓存\n  setGoodsStorage (size) {\n    let that = this\n    let goodsStorage = app.gs('goodsStorage') || []\n    if (size) { // 单独规格添加\n      if (goodsStorage.length < 1) {\n        goodsStorage.push({\n          img: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].src,\n          name: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].goodsname,\n          price: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].spec[that.data.sizeIndex].price,\n          id: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].spec[that.data.sizeIndex].s_id || 0,\n          size: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].spec[that.data.sizeIndex].spec_name,\n          num: that.data.sizeNum\n        })\n      } else {\n        for (let [i, v] of goodsStorage.entries()) {\n          if (v.id === that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].spec[that.data.sizeIndex].s_id) { // 如果存在\n            goodsStorage[i] = {\n              img: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].src,\n              name: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].goodsname,\n              price: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].spec[that.data.sizeIndex].price,\n              id: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].spec[that.data.sizeIndex].s_id,\n              size: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].spec[that.data.sizeIndex].spec_name,\n              num: that.data.sizeNum\n            }\n            break\n          } else if (i === goodsStorage.length - 1) {\n            goodsStorage.push({\n              img: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].src,\n              name: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].goodsname,\n              price: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].spec[that.data.sizeIndex].price,\n              id: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].spec[that.data.sizeIndex].s_id,\n              size: that.data.menuArr[that.data.currentIndex].list[that.data.showIndex].spec[that.data.sizeIndex].spec_name,\n              num: that.data.sizeNum\n            })\n          }\n        }\n      }\n    } else {\n      // 单独规格选择\n      for (let v of this.data.menuArr[this.data.currentIndex].list) {\n        if (v.spec.length >= 1) continue // 有规格的不添加\n        if (v.num >= 0) {\n          if (goodsStorage.length >= 1) {\n            for (let [i, m] of goodsStorage.entries()) {\n              if (m.id === v.g_id || m.g_id === v.g_id) { // 缓存中存在该项,重新赋值，跳出循环\n                goodsStorage[i] = v\n                break\n              } else if (i === goodsStorage.length - 1) {\n                goodsStorage.push(v)\n              }\n            }\n          } else {\n            goodsStorage.push(v)\n          }\n        }\n      }\n    }\n    let num = 0\n    for (let [i, v] of goodsStorage.entries()) {\n      if (v.num === 0) {\n        goodsStorage.splice(i, 1)\n      }\n      num += v.num\n    }\n    app.su('goodsStorage', goodsStorage)\n    this.calculatorMoney()\n    this.setData({\n      allCount: num,\n      sizeIndex: 0,\n      sizeNum: 1\n    })\n  },\n  // 计算总价格\n  calculatorMoney () {\n    let allMoney = 0\n    for (let v of app.gs('goodsStorage')) {\n      if (v.num) {\n        allMoney += v.num * v.price\n      }\n    }\n    if (allMoney <= 0) {\n      wx.removeStorageSync('goodsStorage')\n    }\n    this.setData({\n      allMoney\n    })\n  },\n  // 选择尺寸\n  chooseSize (e) {\n    this.setData({\n      sizeIndex: e.currentTarget.dataset.index,\n      sizeNum: 1\n    })\n  },\n  // 尺寸数量选择\n  chooseSizeNum (e) {\n    if (e.currentTarget.dataset.type === 'del') {\n      this.setData({\n        sizeNum: --this.data.sizeNum\n      })\n    } else {\n      this.setData({\n        sizeNum: ++this.data.sizeNum\n      })\n    }\n  },\n  // 顶栏选择\n  chooseTab (e) {\n    this.setData({\n      currentIndex: e.currentTarget.dataset.index,\n      t_id: e.currentTarget.dataset.id\n    })\n  },\n  // 获取菜单\n  getMenuData () {\n    let that = this\n    app.wxrequest({\n      url: app.getUrl().menu,\n      data: {\n        session3rd: app.gs()\n      },\n      success (res) {\n        if (res.data.code === '200') {\n          wx.hideLoading()\n          let menuTabArr = []\n          for (let i in res.data.data) {\n            if (res.data.data[i].t_id) {\n              menuTabArr.push({name: res.data.data[i].typename, t_id: res.data.data[i].t_id})\n            }\n          }\n          that.setData({\n            menuArr: res.data.data,\n            t_id: menuTabArr[0].t_id,\n            menuTabArr\n          })\n        } else {\n          app.setToast(that, {content: res.data.msg})\n        }\n      }\n    })\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    this.getMenuData()\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    let num = 0\n    let timer = ''\n    timer = setTimeout(() => {\n      if (this.data.menuArr) {\n        for (let v of app.gs('goodsStorage')) {\n          num += parseInt(v.num)\n        }\n        this.calculatorMoney()\n        if (app.gs('goodsStorage')) {\n          if (app.gs('goodsStorage').length >= 1) {\n            for (let outv in this.data.menuArr) {\n              if (outv !== 'coupon') {\n                for (let v of this.data.menuArr[outv].list) {\n                  for (let g of app.gs('goodsStorage')) {\n                    if (g.g_id === v.g_id) {\n                      v.num = g.num\n                      break\n                    } else {\n                      v.num = 0\n                    }\n                  }\n                }\n              }\n            }\n          } else {\n            for (let s in this.data.menuArr) {\n              if (s !== 'coupon') {\n                for (let m of this.data.menuArr[s].list) {\n                  m.num = 0\n                }\n              }\n            }\n          }\n        } else {\n          for (let s in this.data.menuArr) {\n            if (s !== 'coupon') {\n              for (let m of this.data.menuArr[s].list) {\n                m.num = 0\n              }\n            }\n          }\n        }\n        this.setData({\n          allCount: num,\n          menuArr: this.data.menuArr\n        })\n      } else {\n        timer()\n      }\n    }, 100)\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}