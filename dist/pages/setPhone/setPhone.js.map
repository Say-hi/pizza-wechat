{"version":3,"sources":["pages/setPhone/setPhone.js"],"names":["app","getApp","Page","data","title","text","confirm","e","detail","target","dataset","type","checkMobile","value","phone","setToast","content","lostTime","code","wxrequest","url","getUrl","login","success","res","wx","hideLoading","console","log","that","time","timer","setInterval","setData","disabled","clearInterval","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":";;AAAA;AACA,IAAMA,MAAMC,QAAZ;;AAEA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,WAAO,UADH;AAEJC,UAAM;AAFF,GAJH;AAQHC,SARG,mBAQMC,CARN,EAQS;AACV,QAAIA,EAAEC,MAAF,CAASC,MAAT,CAAgBC,OAAhB,CAAwBC,IAAxB,KAAiC,MAArC,EAA6C;AAC3C,UAAIX,IAAIY,WAAJ,CAAgBL,EAAEC,MAAF,CAASK,KAAT,CAAeC,KAA/B,CAAJ,EAA2C,OAAOd,IAAIe,QAAJ,CAAa,IAAb,EAAmB,EAACC,SAAS,cAAV,EAAnB,CAAP;AAC3C,WAAKC,QAAL;AACD,KAHD,MAGO;AACL,UAAIjB,IAAIY,WAAJ,CAAgBL,EAAEC,MAAF,CAASK,KAAT,CAAeC,KAA/B,CAAJ,EAA2C,OAAOd,IAAIe,QAAJ,CAAa,IAAb,EAAmB,EAACC,SAAS,cAAV,EAAnB,CAAP;AAC3C,UAAI,CAACT,EAAEC,MAAF,CAASK,KAAT,CAAeK,IAApB,EAA0B,OAAOlB,IAAIe,QAAJ,CAAa,IAAb,EAAmB,EAACC,SAAS,QAAV,EAAnB,CAAP;AAC1BhB,UAAImB,SAAJ,CAAc;AACZC,aAAKpB,IAAIqB,MAAJ,GAAaC,KADN;AAEZnB,cAAM;AACJW,iBAAOP,EAAEC,MAAF,CAASK,KAAT,CAAeC,KADlB;AAEJI,gBAAMX,EAAEC,MAAF,CAASK,KAAT,CAAeK;AAFjB,SAFM;AAMZK,eANY,mBAMHC,GANG,EAME;AACZC,aAAGC,WAAH;AACAC,kBAAQC,GAAR,CAAYJ,GAAZ;AACD;AATW,OAAd;AAWD;AACF,GA3BE;;AA4BH;AACAP,UA7BG,sBA6BS;AACV,QAAIY,OAAO,IAAX;AACA,QAAIC,OAAO,EAAX;AACA;AACA,QAAIC,QAAQC,YAAY,YAAM;AAC5B,UAAIF,QAAQ,CAAZ,EAAe;AACbD,aAAKI,OAAL,CAAa;AACXC,oBAAU,KADC;AAEX7B;AAFW,SAAb;AAIA,eAAO8B,cAAcJ,KAAd,CAAP;AACD;AACDF,WAAKI,OAAL,CAAa;AACXC,kBAAU,IADC;AAEX7B,cAAS,EAAEyB,IAAX;AAFW,OAAb;AAID,KAZW,EAYT,IAZS,CAAZ;AAaD,GA9CE;;AA+CH;;;AAGAM,QAlDG,oBAkDO;AACR;AACD,GApDE;;;AAsDH;;;AAGAC,SAzDG,qBAyDQ;AACT;AACD,GA3DE;;;AA6DH;;;AAGAC,QAhEG,oBAgEO;AACR;AACD,GAlEE;;;AAoEH;;;AAGAC,QAvEG,oBAuEO;AACR;AACD,GAzEE;;;AA2EH;;;AAGAC,UA9EG,sBA8ES;AACV;AACD,GAhFE;;;AAkFH;;;AAGAC,mBArFG,+BAqFkB;AACnB;AACD;AAvFE,CAAL","file":"setPhone.js","sourcesContent":["// 获取全局应用程序实例对象\nconst app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    title: 'setPhone',\n    text: '获取验证码'\n  },\n  confirm (e) {\n    if (e.detail.target.dataset.type === 'code') {\n      if (app.checkMobile(e.detail.value.phone)) return app.setToast(this, {content: '请输入正确的11位手机号'})\n      this.lostTime()\n    } else {\n      if (app.checkMobile(e.detail.value.phone)) return app.setToast(this, {content: '请输入正确的11位手机号'})\n      if (!e.detail.value.code) return app.setToast(this, {content: '请输入验证码'})\n      app.wxrequest({\n        url: app.getUrl().login,\n        data: {\n          phone: e.detail.value.phone,\n          code: e.detail.value.code\n        },\n        success (res) {\n          wx.hideLoading()\n          console.log(res)\n        }\n      })\n    }\n  },\n  // 倒计时\n  lostTime () {\n    let that = this\n    let time = 60\n    // todo 请求验证码\n    let timer = setInterval(() => {\n      if (time <= 1) {\n        that.setData({\n          disabled: false,\n          text: `重发送验证码`\n        })\n        return clearInterval(timer)\n      }\n      that.setData({\n        disabled: true,\n        text: `${--time}秒后重发送`\n      })\n    }, 1000)\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  }\n})\n"]}